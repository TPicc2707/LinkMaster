@model IEnumerable<LinkMasters.Models.Link>
@{
    ViewData["Title"] = "JROTC";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<partial name="JROTCButtonsPartial" />

<div class="container-fluid1">
    <div class="row">
        <h1 class="title" style="padding-top: 50px">JQUIP</h1>
        @foreach (var item in Model)
        {
            if (item.ApplicationId == 1)
            {
                <div class="column1">
                    <div class="thumbex1">
                        <div class="thumbnail1">
                            @if (item.ImageId != null)
                            {
                                if (item.Nickname == "Bypass")
                                {
                                    <a onclick="AddUserName(event, '@item.Url')" href="#"><img src="@Url.Content(item.Image.ImagePath)" /><span class="image-title">@item.Nickname</span></a>

                                }
                                else
                                {
                                    <a target="_blank" href="@item.Url"><img src="@Url.Content(item.Image.ImagePath)" /><span class="image-title">@item.Nickname</span></a>

                                }
                            }
                            else
                            {
                                <a target="_blank" href="@item.Url"><img src="@Url.Content("~/Images/Default/Default.png")" /><span class="image-title">@item.Nickname</span></a>

                            }
                        </div>
                    </div>
                </div>
            }
        }
    </div>
    <div class="row">
        <h1 class="title" style="padding-top: 50px">JCIMS</h1>
        @foreach (var item in Model)
        {
            if (item.ApplicationId == 2)
            {
                <div class="column1">
                    <div class="thumbex1">
                        <div class="thumbnail1">
                            @if (item.ImageId != null)
                            {
                                if (item.Nickname == "Bypass")
                                {
                                    <a onclick="AddUserName(event, '@item.Url')" href="#"><img src="@Url.Content(item.Image.ImagePath)" /><span class="image-title">@item.Nickname</span></a>

                                }
                                else
                                {
                                    <a target="_blank" href="@item.Url"><img src="@Url.Content(item.Image.ImagePath)" /><span class="image-title">@item.Nickname</span></a>

                                }

                            }
                            else
                            {
                                <a target="_blank" href="@item.Url"><img src="@Url.Content("~/Images/Default/Default.jpg")" /><span class="image-title">@item.Nickname</span></a>

                            }
                        </div>
                    </div>
                </div>
            }
        }
    </div>
    <div class="row">
        <h1 class="title" style="padding-top: 50px">JUMS </h1>
        @foreach (var item in Model)
        {
            if (item.ApplicationId == 3)
            {
                <div class="column1">
                    <div class="thumbex1">
                        <div class="thumbnail1">
                            @if (item.ImageId != null)
                            {
                                <a target="_blank" href="@item.Url"><img src="@Url.Content(item.Image.ImagePath)" /><span class="image-title">@item.Nickname</span></a>

                            }
                            else
                            {
                                <a target="_blank" href="@item.Url"><img src="@Url.Content("~/Images/Default/Default.jpg")" /><span class="image-title">@item.Nickname</span></a>

                            }
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#all').addClass('active');
        })

            function AddUserName(event, url) {
                var self = this;
                var dlg = $('<div title="Add User Name">'
                    + 'User Name: '
                    + '<br />'
                    + '<input id="userName" type="text" style="width: 100%; height: 30px;"/>'
                ).dialog({
                    open: function (event, ui) {
                        $(".ui-dialog-titlebar-close", ui.dialog | ui).hide();
                    },
                    close: function () {
                        $(self).remove();
                    },
                    closeOnEscape: false,
                    resizable: false,
                    height: 180,
                    width: 480,
                    modal: true,
                    buttons: {
                        'Go': function () {
                            var userName = $("#userName").val();
                            var byPassUrl = url + userName;
                            window.open(byPassUrl, '_blank');
                            dlg.dialog('close');
                            window.location.href('@Url.Action("JROTC", "Links")');
                        },
                        'Cancel': function () {
                            dlg.dialog('close');
                        }
                    }
                })
            }
    </script>
}

